
<div class="container mx-auto p-4">
    <h1>الملف الشخصي للمستخدم</h1>
    <hr>
    <p>معلومات المستخدم:</p>
    <% if @user.avatar.attached? %>
        <img src="<%= url_for(@user.avatar) %>" alt="Avatar" class="w-24 h-24 rounded-full object-cover" />
    <% end %>
    <p>اسم المستخدم: <%= @user.username %></p>
    <br>
    <% if @user.id == current_user.id %>
        <form class="mb-2 inline-block" action="/user/username" method="post">
            <input type="text" name="username" placeholder="اسم المستخدم الجديد" class="border border-gray-300 rounded px-2 py-1">
            <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"> <%= t('change_username') %> </button>
        </form>
        <br>
        <form action="/user/avatar" method="post" accept-charset="UTF-8" enctype="multipart/form-data" class="flex items-center space-x-4">
            <input type="file" name="avatar" id="avatar" class="" />
            <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"> <%= t('change_profile_avatar')%> </button>
        </form>
        <p>البريد الإلكتروني: <%= @user.email %></p>
        <p>معرف المستخدم: <%= @user.id %></p>
    <% end %>
    <a href="/user/index">
        <button class="mt-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"> <%= t('view_all_users') %> </button>
    </a>
    <br>
</div>
<br>
<% if @user.posts.any? %>
    <h2>المشاركات:</h2>
    <ul>
        <% @feeds.each do |feed| %>
            <div class="mx-auto my-5 max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700">
                <% if feed.is_a?(Post) %>
                    <%= render 'shared/post_card', post: feed, type: 'post' %>
                <% elsif feed.is_a?(Repost) %>
                    <p class="font-normal text-gray-700 dark:text-gray-400"><%= t('user_add_new_post_part1') %> <%= feed.user.username %> <%= t('user_reposted') %>.</p>
                    <%= render 'shared/post_card', post: feed.post, type: 'repost' %>
                <% end %>
            </div>
        <% end %>
    </ul>
<% else %>
    <p>لا توجد مشاركات لعرضها.</p>
<% end %>

