<div class="flex items-center space-x-4 mb-4 p-4">
    <% if post.user.avatar.attached? %>
        <img class="w-10 h-10 rounded-full" src="<%= url_for(post.user.avatar) %>" alt="User avatar" />
    <% end %>
    <a href="<%= user_profile_path(post.user.id) %>"><%= post.user.username %></a>
</div>
<% if post.image.attached? %>
    <a href="#">
    <img class="rounded-t-lg" src="<%= url_for(post.image) %>" alt="" />
    </a>
<% end %>
<div class="p-5 ">
    <p class="font-normal text-gray-700 dark:text-gray-400"><%= post.user.id %></p>
    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400"><%= post.post_text %></p>
    <p class="mt-3 text-sm text-gray-500 dark:text-gray-400">Posted by: <%= post.user.email %> at <%= post.created_at %></p>
    <br/>
<div class="flex space-x-2">
    <form action="/post/like" method="post">
        <input type="hidden" name="post_id" value="<%= post.id %>">
        <% if post.likes.select { |like| like.user_id == current_user.id }.count == 0 %>
            <button type="submit" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            >👍</button>
        <% else %>
            <button disabled class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-gray-600 rounded-lg hover:bg-gray-500 focus:ring-4 focus:outline-none focus:ring-gray-400 dark:bg-gray-400 dark:hover:bg-gray-500 dark:focus:ring-gray-500"
            >👍</button>
        <% end %>
    </form>
    <button onclick="toggleAccordion(<%= post.id %>)" class=" inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
        <span>💬</span>
    </button>
    </div>
    <div id="content-<%= post.id %>" class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
    <form class="mb-2" action="/post/comment" method="post">
        <input type="hidden" name="post_id" value="<%= post.id %>">
        <label for="comment" class="py-2 block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400"><%= t('Add_a_comment') %></label>
        <textarea name="comment_text" type="text" id="comment" class="mb-2 block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="<%= t('Your_comment') %>">
        </textarea>
        <button type="submit" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        ><%= t('Add_a_comment') %></button>
    </form>
    <% post.comments.each do |comment| %>
        <div class="p-5 mx-auto my-5 max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700">
            <% if comment.user.avatar.attached? %>
                <img class="w-10 h-10 rounded-full" src="<%= url_for(comment.user.avatar) %>" alt="User avatar" />
            <% end %>
            <p class="font-normal text-gray-700 dark:text-gray-400"><a href="<%= user_profile_path(comment.user.id) %>"><%= comment.user.username %></a>: <br> <%= comment.comment_text %></p>
        </div>
    <% end %>
    </div>
</div>
